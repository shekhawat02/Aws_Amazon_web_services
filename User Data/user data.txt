#!/bin/bash

# 1. Update package list and install Apache web server
sudo apt update -y
sudo apt install -y apache2

# 2. Start the Apache service and enable it on system boot
sudo systemctl start apache2
sudo systemctl enable apache2

# 3. Get the instance's Availability Zone (AZ) metadata
EC2_AVAIL_ZONE=$(curl -s http://169.254.169.254/latest/meta-data/placement/availability-zone)

# 4. Create custom index.html file with dynamic details
echo "<h1>Successful Automated Deployment!</h1>" > /var/www/html/index.html
echo "<p>Web Server is running on: $(hostname -f)</p>" >> /var/www/html/index.html
echo "<p>Located in AWS Availability Zone: $EC2_AVAIL_ZONE</p>" >> /var/www/html/index.html
